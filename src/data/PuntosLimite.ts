// 游늸 Puntos l칤mite donde el usuario debe revisar manualmente su ubicaci칩n
export interface PuntoLimite {
  latitude: number;
  longitude: number;
  descripcion?: string; // Descripci칩n opcional del punto l칤mite
}

export const puntosLimite: PuntoLimite[] = [
  {
    latitude: -34.912592,
    longitude: -57.945868,
    descripcion: "amarillo-azul",
  },
  {
    latitude: -34.913518,
    longitude: -57.94691,
    descripcion: "amarillo-azul",
  },
  {
    latitude: -34.919126,
    longitude: -57.953089,
    descripcion: "amarillo-azul",
  },
  {
    latitude: -34.918206,
    longitude: -57.95207,
    descripcion: "amarillo-azul",
  },
  {
    latitude: -34.917313,
    longitude: -57.951024,
    descripcion: "amarillo-azul",
  },
  {
    latitude: -34.913431,
    longitude: -57.944724,
    descripcion: "amarillo",
  },
  {
    latitude: -34.913939,
    longitude: -57.944086,
    descripcion: "amarillo",
  },
  {
    latitude: -34.91485,
    longitude: -57.945113,
    descripcion: "amarillo",
  },
  {
    latitude: -34.91584,
    longitude: -57.94613,
    descripcion: "amarillo",
  },
  {
    latitude: -34.920357,
    longitude: -57.942329,
    descripcion: "amarillo",
  },
  {
    latitude: -34.921127,
    longitude: -57.951973,
    descripcion: "amarillo",
  },
  {
    latitude: -34.921449,
    longitude: -57.952252,
    descripcion: "verde",
  },
  {
    latitude: -34.921352,
    longitude: -57.950975,
    descripcion: "verde",
  },
  {
    latitude: -34.921684,
    longitude: -57.949776,
    descripcion: "verde",
  },
  {
    latitude: -34.922364,
    longitude: -57.948902,
    descripcion: "verde",
  },
  {
    latitude: -34.923027,
    longitude: -57.947924,
    descripcion: "verde",
  },
  {
    latitude: -34.923816,
    longitude: -57.94687,
    descripcion: "verde",
  },
  {
    latitude: -34.924661,
    longitude: -57.945703,
    descripcion: "verde",
  },
  {
    latitude: -34.925556,
    longitude: -57.944502,
    descripcion: "verde",
  },
  {
    latitude: -34.926366,
    longitude: -57.943416,
    descripcion: "verde",
  },
  {
    latitude: -34.927186,
    longitude: -57.942308,
    descripcion: "verde",
  },
  {
    latitude: -34.92889,
    longitude: -57.942195,
    descripcion: "verde",
  },
  {
    latitude: -34.928972,
    longitude: -57.944244,
    descripcion: "verde",
  },
  {
    latitude: -34.928138,
    longitude: -57.945349,
    descripcion: "verde",
  },
  {
    latitude: -34.927303,
    longitude: -57.946478,
    descripcion: "verde",
  },
  {
    latitude: -34.925966,
    longitude: -57.947143,
    descripcion: "verde",
  },
  {
    latitude: -34.925966,
    longitude: -57.947143,
    descripcion: "verde",
  },
  {
    latitude: -34.92557,
    longitude: -57.948822,
    descripcion: "verde",
  },
  {
    latitude: -34.92557,
    longitude: -57.948822,
    descripcion: "verde",
  },
  {
    latitude: -34.924788,
    longitude: -57.949871,
    descripcion: "verde",
  },
  {
    latitude: -34.924106,
    longitude: -57.95085,
    descripcion: "verde",
  },
  {
    latitude: -34.923448,
    longitude: -57.951688,
    descripcion: "verde",
  },
  {
    latitude: -34.922824,
    longitude: -57.952493,
    descripcion: "verde",
  },
  {
    latitude: -34.91943,
    longitude: -57.954899,
    descripcion: "rosa",
  },
  {
    latitude: -34.920433,
    longitude: -57.955918,
    descripcion: "rosa",
  },
  {
    latitude: -34.921367,
    longitude: -57.956988,
    descripcion: "rosa",
  },
  {
    latitude: -34.921447,
    longitude: -57.958249,
    descripcion: "rosa",
  },
  {
    latitude: -34.921207,
    longitude: -57.959435,
    descripcion: "rosa",
  },
  {
    latitude: -34.920561,
    longitude: -57.960317,
    descripcion: "rosa",
  },
  {
    latitude: -34.919838,
    longitude: -57.96128,
    descripcion: "rosa",
  },
  {
    latitude: -34.919062,
    longitude: -57.962317,
    descripcion: "rosa",
  },
  {
    latitude: -34.91735811185469,
    longitude: -57.96241328138182,
    descripcion: "rosa",
  },
  {
    latitude: -34.916823,
    longitude: -57.960808,
    descripcion: "rosa",
  },
  {
    latitude: -34.915441357721406,
    longitude: -57.96028194998272,
    descripcion: "rosa",
  },
  {
    latitude: -34.91452090152691,
    longitude: -57.95927746270836,
    descripcion: "rosa",
  },
  {
    latitude: -34.91360358459498,
    longitude: -57.95826131321285,
    descripcion: "rosa",
  },
  {
    latitude: -34.91268121201637,
    longitude: -57.957265766116194,
    descripcion: "rosa",
  },
  {
    latitude: -34.91256369818788,
    longitude: -57.955300093253314,
    descripcion: "rosa-azul",
  },
  {
    latitude: -34.91422674697414,
    longitude: -57.95516548279145,
    descripcion: "rosa-azul",
  },
  {
    latitude: -34.91573901152079,
    longitude: -57.95508029630428,
    descripcion: "rosa-azul",
  },
  {
    latitude: -34.91601503538952,
    longitude: -57.9550293343355,
    descripcion: "rosa-azul",
  },
  {
    latitude: -34.91714125368645,
    longitude: -57.95499595345886,
    descripcion: "rosa-azul",
  },
  {
    latitude: -34.91771968319708,
    longitude: -57.95495303811672,
    descripcion: "rosa-azul",
  },
  {
    latitude: -34.91838058343025,
    longitude: -57.95491548718868,
    descripcion: "rosa-azul",
  },
  {
    latitude: -34.918392517353766,
    longitude: -57.954930135157845,
    descripcion: "rosa-azul",
  },
  {
    latitude: -34.91932064616535,
    longitude: -57.9547530413151,
    descripcion: "azul",
  },
  {
    latitude: -34.919474597098066,
    longitude: -57.95475035910621,
    descripcion: "azul",
  },
  {
    latitude: -34.91996283957447,
    longitude: -57.95414686210742,
    descripcion: "azul",
  },
  {
    latitude: -34.915823009244065,
    longitude: -57.950829864533695,
    descripcion: "azul-rojo",
  },
  {
    latitude: -34.91577022375133,
    longitude: -57.95077085593826,
    descripcion: "azul-rojo",
  },
  {
    latitude: -34.91485526979952,
    longitude: -57.949700654560225,
    descripcion: "azul-rojo",
  },
  {
    latitude: -34.9147892871504,
    longitude: -57.94979184966226,
    descripcion: "azul-rojo",
  },
  {
    latitude: -34.913955701759626,
    longitude: -57.94854462246389,
    descripcion: "azul",
  },
  {
    latitude: -34.90708808910992,
    longitude: -57.94901281112224,
    descripcion: "azul",
  },
  {
    latitude: -34.90712328316394,
    longitude: -57.94887870067805,
    descripcion: "azul",
  },
  {
    latitude: -34.90712328316394,
    longitude: -57.949136192730876,
    descripcion: "azul",
  },
  {
    latitude: -34.91068776906808,
    longitude: -57.95429669412986,
    descripcion: "azul",
  },
  {
    latitude: -34.91150564258054,
    longitude: -57.955214204200644,
    descripcion: "azul",
  },
  {
    latitude: -34.91399020850696,
    longitude: -57.95323621733068,
    descripcion: "azul",
  },
  {
    latitude: -34.91126759094236,
    longitude: -57.95456140862334,
    descripcion: "rojo",
  },
  {
    latitude: -34.91635579642194,
    longitude: -57.94792604524312,
    descripcion: "rojo",
  },
  {
    latitude: -34.91671649403923,
    longitude: -57.94723403535117,
    descripcion: "rojo",
  },
  {
    latitude: -34.916333802626625,
    longitude: -57.9500932701056,
    descripcion: "rojo-azul",
  },
  {
    latitude: -34.91404739402927,
    longitude: -57.953150386646406,
    descripcion: "rojo",
  },
];

/**
 * Calcula la distancia entre dos puntos geogr치ficos usando la f칩rmula de Haversine
 * @param lat1 Latitud del primer punto
 * @param lon1 Longitud del primer punto
 * @param lat2 Latitud del segundo punto
 * @param lon2 Longitud del segundo punto
 * @returns Distancia en metros
 */
export function calcularDistancia(
  lat1: number,
  lon1: number,
  lat2: number,
  lon2: number
): number {
  const R = 6371000; // Radio de la Tierra en metros
  const dLat = ((lat2 - lat1) * Math.PI) / 180;
  const dLon = ((lon2 - lon1) * Math.PI) / 180;
  const a =
    Math.sin(dLat / 2) * Math.sin(dLat / 2) +
    Math.cos((lat1 * Math.PI) / 180) *
      Math.cos((lat2 * Math.PI) / 180) *
      Math.sin(dLon / 2) *
      Math.sin(dLon / 2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  return R * c;
}

/**
 * Verifica si el usuario est치 cerca de alg칰n punto l칤mite (10 metros o menos)
 * @param userLocation Ubicaci칩n actual del usuario
 * @returns Punto l칤mite m치s cercano si est치 a 10m o menos, null si no
 */
export function verificarProximidadPuntoLimite(userLocation: {
  latitude: number;
  longitude: number;
}): PuntoLimite | null {
  const DISTANCIA_LIMITE = 15; // 15 metros

  for (const punto of puntosLimite) {
    const distancia = calcularDistancia(
      userLocation.latitude,
      userLocation.longitude,
      punto.latitude,
      punto.longitude
    );

    if (distancia <= DISTANCIA_LIMITE) {
      return punto;
    }
  }

  return null;
}
